extends layout

block content
	div(ng-controller='checklistCtrl as ck')
		.navbar.navbar-default
			.container-fluid
				nav
					ul.pagination.pull-left
						li(ng-repeat='i in ck.Indexes track by $index', ng-class="{active: ck.Index == $index}")
							a(href='#', ng-click='ck.loadSlice($index)') {{i}}
					form.navbar-form.navbar-left.pull-right
						.form-group
							input(type='text', class='form-control', placeholder='Search', ng-model='search.val')
						button(class='btn btn-default', type='submit', ng-click='search()')
							i.fa.fa-search

		div.progress(ng-if='ck.Publications.length === 0')
			div.progress-bar.progress-bar-striped.active(style='width: 100%')

		table(class='table', ng-if='ck.Publications.length > 0')
			thead
				tr
					th
					th Title
					th Series
					th Issues
					th Dates
					th Notes
					th 
			tbody
					tr(ng-repeat='r in ck.Publications', ng-class='ck.FlagAsOwned(r)')
						td(width='100')
							.btn-toolbar
								.btn-group
									button.btn.btn-danger.btn-xs(ng-click='ck.Remove(r)')
										i.fa.fa-trash-o
									button.btn.btn-success.btn-xs(ng-click='ck.MarkAsOwned(r)', ng-if='!r.Owned')
										i.fa.fa-check
									button.btn.btn-info.btn-xs(ng-click='ck.MarkAsOwned(r)', ng-if='r.Owned')
										i(class='fa fa-ban')
						td 
							span {{r.Title}}
							.btn-toolbar.pull-right
								.btn-group
									a.btn.btn-default.btn-xs.pull-right(ng-href='{{ck.BuildCvSearchUrl(r)}}', target='_blank') CV
									a.btn.btn-default.btn-xs.pull-right(ng-href='{{ck.BuildDcSearchUrl(r)}}', target='_blank') DC
						td {{r.Series}}
						td {{r.Issues}}
						td {{r.Dates}}
						td {{r.Notes}}
						td
							button.btn.btn-default.btn-xs(ng-click='ck.ParseSeries(r)') Parse Series
