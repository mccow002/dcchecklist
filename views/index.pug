extends layout

block content
  div(ng-controller='checklistCtrl as ck')
    nav(class='navbar navbar-default')
      div(class='container-fluid')
        nav
          ul(class='pagination pull-left')
            li(ng-repeat='i in ck.Indexes track by $index', ng-class="{active: ck.Index == $index}")
              a(href='#', ng-click='ck.loadSlice($index)') {{i}}
        form(class='navbar-form navbar-left pull-right')
          div(class='form-group')
            input(type='text', class='form-control', placeholder='Search', ng-model='search.val')
          button(class='btn btn-default', type='submit', ng-click='search()')
            i(class='fa fa-search')

    div(class='progress', ng-if='ck.Publications.length === 0')
      div(class='progress-bar progress-bar-striped active', style='width: 100%')

    table(class='table', ng-if='ck.Publications.length > 0')
      thead
        tr
          th
          th Title
          th Series
          th Issues
          th Dates
          th Notes
          th 
      tbody
          tr(ng-repeat='r in ck.Publications', ng-class='ck.FlagAsOwned(r)')
            td(width='100')
              div(class='btn-toolbar')
                div(class='btn-group')
                  button(class='btn btn-danger btn-xs', ng-click='ck.Remove(r)')
                    i(class='fa fa-trash-o')
                  button(class='btn btn-success btn-xs', ng-click='ck.MarkAsOwned(r)', ng-if='!r.Owned')
                    i(class='fa fa-check')
                  button(class='btn btn-info btn-xs', ng-click='ck.MarkAsOwned(r)', ng-if='r.Owned')
                    i(class='fa fa-ban')
            td 
              span {{r.Title}}
              div(class='btn-toolbar pull-right')
                div(class='btn-group')
                  a(class='btn btn-default btn-xs pull-right', ng-href='{{ck.BuildCvSearchUrl(r)}}', target='_blank') CV
                  a(class='btn btn-default btn-xs pull-right', ng-href='{{ck.BuildDcSearchUrl(r)}}', target='_blank') DC
            td {{r.Series}}
            td {{r.Issues}}
            td {{r.Dates}}
            td {{r.Notes}}
            td
              button(class='btn btn-default btn-xs', ng-click='ck.parseSeries(r)') Parse Series
